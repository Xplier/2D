<!DOCTYPE html>
<html>
<head>
    <title>Vertical Platform Climber</title>
    <style>
        body {
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: #333;
            overflow: hidden;
        }
        canvas {
            border: 2px solid white;
            touch-action: none; /* Disable pinch-zoom on mobile */
        }
        #controls {
            position: absolute;
            bottom: 20px;
            display: flex;
            justify-content: center;
            width: 100%;
        }
        .control-button {
            width: 60px;
            height: 60px;
            margin: 0 10px;
            background-color: rgba(0, 0, 0, 0.5);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 20px;
            user-select: none;
        }
        #jumpButton {
            position: absolute;
            bottom: 90px;
            left: calc(50% - 30px);
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 20px;
        }
    </style>
</head>
<body>
    <script>
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        document.body.appendChild(canvas);

        // Function to set canvas resolution dynamically
        function resizeCanvas() {
            canvas.width = window.innerWidth * 0.8;  // 80% of screen width
            canvas.height = window.innerHeight * 0.8;  // 80% of screen height
        }
        
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        class Player {
            constructor() {
                this.reset();
                this.size = 30;
                this.jumpForce = -15;
                this.maxSpeed = 8;
                this.standTimer = 3000;
                this.lastMoveTime = Date.now();
                this.standTimerVisible = false;
                this.standTimerDelay = 400; // 0.4 seconds before showing timer
            }

            reset() {
                this.x = canvas.width / 2;
                this.y = canvas.height - 100;
                this.velocityX = 0;
                this.velocityY = 0;
                this.isGrounded = false;
                this.score = 0;
                this.standTimer = 3000;
                this.lastMoveTime = Date.now();
                this.standTimerVisible = false;
            }

            draw() {
                ctx.beginPath();
                ctx.roundRect(this.x - this.size/2, this.y - this.size/2, 
                            this.size, this.size, 8);
                ctx.fillStyle = '#FF5722';
                ctx.fill();
                ctx.closePath();

                if (this.isGrounded && Math.abs(this.velocityX) < 0.1) {
                    const currentTime = Date.now();
                    const standingTime = currentTime - this.lastMoveTime;
                    
                    if (standingTime >= this.standTimerDelay) {
                        const timeLeft = Math.max(0, (this.standTimer - standingTime) / 1000).toFixed(1);
                        if (standingTime < this.standTimer) {
                            ctx.fillStyle = 'white';
                            ctx.font = '20px Arial';
                            ctx.fillText(timeLeft, this.x - 10, this.y - this.size);
                        }
                    }
                }
            }
        }

        class Platform {
            constructor(x, y, type = 'normal') {
                this.width = Math.random() * 80 + 100;
                this.height = 15;
                this.x = x;
                this.y = y;
                this.type = type;
                this.hasJumpPad = Math.random() < 0.15;
                this.spawnTime = Date.now();
                this.disappearTime = 700;
                this.alpha = 1;
            }

            update() {
                if (this.type === 'disappearing') {
                    const age = Date.now() - this.spawnTime;
                    if (age < this.disappearTime) {
                        this.alpha = 1 - (age / this.disappearTime);
                    } else {
                        this.alpha = 0;
                    }
                }
            }

            isActive() {
                return this.type === 'normal' || this.alpha > 0;
            }

            draw() {
                if (this.alpha <= 0) return;

                ctx.beginPath();
                ctx.roundRect(this.x - this.width/2, this.y, this.width, this.height, 5);
                ctx.fillStyle = this.type === 'normal' ? '#4CAF50' : `rgba(128, 128, 128, ${this.alpha})`;
                ctx.fill();
                ctx.closePath();

                if (this.hasJumpPad && this.type === 'normal') {
                    ctx.beginPath();
                    ctx.arc(this.x, this.y - 5, 8, 0, Math.PI * 2);
                    ctx.fillStyle = '#FFD700';
                    ctx.fill();
                    ctx.closePath();
                }
            }
        }

        const player = new Player();
        let platforms = [];
        let gameSpeed = 2;
        let highScore = 0;

        function initPlatforms() {
            platforms = [];
            platforms.push(new Platform(canvas.width/2, canvas.height - 50, 'normal'));
            for (let i = 0; i < 8; i++) {
                generatePlatform();
            }
        }

        function generatePlatform() {
            const minGap = 120;
            const maxGap = 170;
            const lastPlatform = platforms[platforms.length - 1];
            const y = lastPlatform.y - (Math.random() * (maxGap - minGap) + minGap);
            const minX = 80;
            const maxX = canvas.width - 80;
            const x = Math.random() * (maxX - minX) + minX;
            platforms.push(new Platform(x, y));
        }

        const keys = {
            left: 
